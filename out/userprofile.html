<!doctype html>
<html lang="en-us">
  <head>
    <meta http-equiv="origin-trial" content="AiiqErPPIECW3smg0ZrmkBorbURWiOcf1tn4ge/XORQdLjo8OK+lM8WgWT8fDh905BmSi9he8uji55p/rnf1UgUAAABseyJvcmlnaW4iOiJodHRwczovL3NoYWRlcmVkaXRvci5rYXVzdC5lZHUuc2E6NDQzIiwiZmVhdHVyZSI6IldlYkdQVSIsImV4cGlyeSI6MTY2MzcxODM5OSwiaXNTdWJkb21haW4iOnRydWV9">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
    <title>shader editor</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <script src="https://fastly.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <!-- load bootstrap -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
        <style>
        body { margin: 0; background-color: rgba(110, 109, 109, 0.432) }
        .nav-pills
        {
          position: absolute;
          top: 10%;
          left: 0%;
          width: 5%;
          height: 100%;
        }
        .tab-content
        {
          position: absolute;
            top: 10%;
            left: 23%;
            width: 95%;
        }
        .changepassword
        {
            position: absolute;
            top: 15%;
            left: 3%;
        }
        .deleteuser
        {
            position: absolute;
            top: 15%;
            left: 30%;
        }
        .show-shaders
        {
            position: absolute;
            top: 0%;
            left: 0%;
            width: 45%;
        }
        .show-textures
        {
            position: absolute;
            top: 0%;
            left: 0%;
            width: 45%;
        }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-default navbar-static-top" >
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Shader Editor</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="/">Home</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/contact">Contact</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                  <li><a id="welcome"></a></li>
                <li><a href="/browse">Browse</a></li>
                <li><a href="/new">New</a></li>
                <li><a id="signin" href="/signin">Sign In</a></li>
                </ul>
        </div>
      </div>
    </nav>
    <script>
      if("{{username}}".length!=0)
      {
        console.log("{{username}}")
        document.getElementById("signin").href="/logout";
        document.getElementById("signin").innerText="Log Out";
        document.getElementById("welcome").href="/userprofile";
        document.getElementById("welcome").innerText="Welcome,{{username}}";
      }
      $(document).ready( function () {
      $('#show').DataTable();
      $('#show-textures').DataTable();
      } );
      </script>
      <div class="nav-pills">
        <ul class="nav flex-column">
          <li class="active"><a data-toggle="tab" href="#home">Shaders</a></li>
          <li><a data-toggle="tab" href="#menu1">Textures</a></li>
          <li><a data-toggle="tab" href="#menu2">Account</a></li>
        </ul>
      </div>
    <div class="tab-content">
      <div id="home" class="tab-pane fade in active">
        <div class="show-shaders" >
          <h1>Shaders</h1>
          <table id="show">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Status</th>
                <th scope="col">View</th>
                <th scope="col">Delete</th>
              </tr>
            </thead>
            <tbody>
              {{#each shaders}}
              <tr>
                <th scope="row">{{id}}</th>
                <td>{{name}}</td>
                <td>{{status}}</td>
                <td><button><a href="/view_user?user={{user}}&name={{name}}">view</a></button></td>
                <td><button onclick="{r=confirm('No recovery after deletion');if(r==true){window.location='/deleteshader?user={{user}}&name={{name}}'}}">delete</button></td>
              </tr>
              {{/each}}
            </tbody>
          </table>
    
        </div>
      </div>
      <div id="menu1" class="tab-pane fade">
        <div class="show-textures" >
          <h1>Textures</h1>
          <table id="show-textures">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Width</th>
                <th scope="col">Height</th>
                <th scope="col">Type</th>
                <th scope="col">View</th>
                <th scope="col">Delete</th>
              </tr>
            </thead>
            <tbody>
              {{#each textures}}
              <tr>
                <th scope="row">{{id}}</th>
                <td>{{name}}</td>
                <td>{{width}}</td>
                <td>{{height}}</td>
                <td>{{type}}</td>
                <td><img src="texture/{{user}}_{{name}}" class="img-thumbnail" width="50" height="30"></td>
                <td><button onclick="{r=confirm('No recovery after deletion');if(r==true){window.location='/deletetexture?user={{user}}&name={{name}}'}}">delete</button></td>
              </tr>
              {{/each}}
            </tbody>
          </table>
    
        </div>
      </div>
      <div id="menu2" class="tab-pane fade">
        <div class="changepassword">
          <h2 class="form-signin-heading">Change Password</h2>
          <label for="email" >Email address</label>
          <input type="email" id="email" name="email" class="form-control" placeholder="Email address" required="">
          <label for="oldpwd" >Old Password</label>
          <input type="password" id="oldpwd" name="oldpwd" class="form-control" placeholder="Old Password" required="">
          <label for="newpwd" >New Password</label>
          <input type="password" id="newpwd" name="newpwd" class="form-control" placeholder="New Password" required="">
          <label for="repeatpwd" >Repeat New Password</label>
          <input type="password" id="repeatpwd" name="repeatpwd" class="form-control" placeholder="Repeat New Password" required="">
          <br>
          <button class="btn btn-lg btn-primary btn-block" onclick="changepassword()">Change</button>
  </div>

  <div class="deleteuser">
      <form class="form-signin" action="/deleteuser" method="post">
          <h2 class="form-signin-heading">Delete User</h2>
          <label for="email" >Confirm Email address</label>
          <input type="email" id="email" name="email" class="form-control" placeholder="Email address" required="">
          <br>
          <button class="btn btn-lg btn-danger btn-block " type="submit">Delete</button>
        </form>
  </div>
      </div>
        </div>
      </div>

      
     






<script>
  function changepassword()
  {
      var email=document.getElementById("email").value
      var oldpwd=document.getElementById("oldpwd").value
      var newpwd=document.getElementById("newpwd").value
      var repeatpwd=document.getElementById("repeatpwd").value
      var formDate = new FormData()
      formDate.set("email",email)
      formDate.set("oldpwd",oldpwd)
      formDate.set("newpwd",newpwd)
      formDate.set("repeatpwd",repeatpwd)
      $.ajax({
        url: '/changepassword',
        data: formDate,
        type: 'post',
        contentType: false,
        processData: false,
        success: function(res){
          if (res=="success")
          {
            alert("Change Successful.")
            window.location.href="/logout"
          }
          else
          {
            alert(res)
          }
        }
      })
      
  } 
</script>
  </body>
</html>